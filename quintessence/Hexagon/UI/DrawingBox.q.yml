parent_classes:


  - class: 'StageInterface'
    scope: public
    init_with: 'LITTLE_MENU'


properties:


  - name: initialized
    type: bool
    init_with: false
    getter: true
  - name: font_bin
    type: AllegroFlare::FontBin*
    init_with: nullptr
    constructor_arg: true
  - name: width
    type: int
    init_with: 800
    constructor_arg: true
  - name: height
    type: int
    init_with: 800
    constructor_arg: true
  - name: a_default_empty_event
    static: true
    type: ALLEGRO_EVENT
    init_with: "{}"
    getter_ref: true
  - name: surface
    type: ALLEGRO_BITMAP*
    init_with: nullptr
  - name: stroking
    type: bool
    init_with: false
    setter: true
    getter: true
  - name: pointer_x
    type: int
    init_with: 0
    setter: true
  - name: pointer_y
    type: int
    init_with: 0
    setter: true


functions:


  - name: initialize
    guards: [ (!get_initialized()), al_is_system_installed() ]
    body: |
      return;


  - name: render
    override: true
    guards: [ get_initialized() ]
    body: |
      placement3d &place = get_place();
      place.start_transform();
      Hexagon::Elements::Window window(width, height);
      window.draw();
      al_draw_bitmap(surface, 0, 0, 0);
      draw_crosshair();
      #include <Hexagon/Elements/Window.hpp>
      place.restore_transform();
      return;
    body_dependency_symbols:
      - Hexagon::Elements::Window


  - name: process_event
    override: true
    parameters:
      - name: event
        type: ALLEGRO_EVENT&
        default_argument: "get_a_default_empty_event_ref()"
    body: |
      switch(event.type)
      {
      case ALLEGRO_EVENT_KEY_CHAR:
        break;
      case ALLEGRO_EVENT_MOUSE_AXES:
        if (get_stroking())
        {
        }
        break;
      case ALLEGRO_EVENT_MOUSE_BUTTON_DOWN:
        set_stroking(true);
        set_pointer_x(event.mouse.x);
        set_pointer_y(event.mouse.y);
        break;
      case ALLEGRO_EVENT_MOUSE_BUTTON_UP:
        set_stroking(false);
        break;
      }
      return;


  - name: process_local_event
    override: true
    parameters:
      - name: event_name
        type: std::string
        default_argument: "\"\""
      - name: action_data
        type: ActionData
        default_argument: "ActionData()"
    body: |
      return;


  - name: draw_crosshair
    private: true
    type: void
    guards: [ al_is_primitives_addon_initialized() ]
    body: |
      float x = pointer_x;
      float y = pointer_y;
      float size = 10;
      ALLEGRO_COLOR color = al_color_name("red");

      float half_size = size * 0.5;
      al_draw_line(x, y-half_size, x, y+half_size, color, 1.0);
      al_draw_line(x-half_size, y, x+half_size, y, color, 1.0);
    body_dependency_symbols:
      - al_is_primitives_addon_initialized


  - name: destroy
    override: true
    type: void
    body: |
      if (surface) al_destroy_bitmap(surface);


dependencies:


  - symbol: StageInterface
    headers: [ Hexagon/StageInterface.hpp ]
  - symbol: AllegroFlare::FontBin*
    headers: [ AllegroFlare/FontBin.hpp ]
  - symbol: Hexagon::Elements::ListMenu
    headers: [ Hexagon/Elements/ListMenu.hpp ]
  - symbol: ActionData
    headers: [ 'Hexagon/ActionData.hpp' ]
  - symbol: ALLEGRO_EVENT
    headers: [ allegro5/allegro.h ]
  - symbol: ALLEGRO_EVENT&
    headers: [ allegro5/allegro.h ]
  - symbol: ALLEGRO_BITMAP*
    headers: [ allegro5/allegro.h ]
  - symbol: Hexagon::Elements::Window
    headers: [ Hexagon/Elements/Window.hpp ]
  - symbol: al_is_primitives_addon_initialized
    headers: [ allegro5/allegro_primitives.h ]
  - symbol: al_draw_line
    headers: [ allegro5/allegro_primitives.h ]

