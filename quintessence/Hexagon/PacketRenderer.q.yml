properties:

  - name: packet
    type: Hexagon::Packet*
    init_with: nullptr
    constructor_arg: true
  - name: font
    type: ALLEGRO_FONT*
    init_with: nullptr
    constructor_arg: true
  - name: width
    type: float
    init_with: 1.0
    constructor_arg: true
  - name: height
    type: float
    init_with: 1.0
    constructor_arg: true

functions:

  - name: render
    guards: [ packet, font, al_is_primitives_addon_initialized() ]
    body: |
      Hexagon::Elements::Window window(width, height);

      window.set_box_fill_color(ALLEGRO_COLOR{0.5f, 0.5f, 0.5f, 1.0f});
      window.set_box_opacity(0.1);
      window.set_cell_padding(10);

      window.set_outer_line_color(ALLEGRO_COLOR{1.0f, 1.0f, 1.0f, 1.0f});
      window.set_outer_line_opacity(0.2);
      window.set_outer_line_thickness(2.0);

      ALLEGRO_COLOR text_color = ALLEGRO_COLOR{0.5, 0.5, 0.5, 0.5};
      int line_height = al_get_font_line_height(font) * 2;
      al_draw_textf(font, text_color, 20, 20, ALLEGRO_ALIGN_LEFT, "Searches: %d", packet->get_searches_count());
      al_draw_textf(font, text_color, 20, 20 + line_height, ALLEGRO_ALIGN_LEFT, "Saves: %d", packet->get_saves_count());

      window.draw();
      return;
    body_dependency_symbols:
      - al_is_primitives_addon_initialized
      - Hexagon::Elements::Window

dependencies:

  - symbol: ALLEGRO_FONT*
    headers: [ allegro5/allegro_font.h ]
  - symbol: Hexagon::Packet*
    headers: [ Hexagon/Packet.hpp ]
  - symbol: al_is_primitives_addon_initialized
    headers: [ allegro5/allegro_primitives.h ]
  - symbol: Hexagon::Elements::Window
    headers: [ Hexagon/Elements/Window.hpp ]
