properties:


  - name: component
    type: Blast::Project::Component
    init_with: '{}'
    constructor_arg: true

  - name: simplify_relatives_list
    type: bool
    init_with: true


functions:


  - name: build_dependents_list
    type: std::vector<std::string>
    body: |
      //std::string dependents_json_filename = "/Users/markoates/Repos/hexagon/documentation/dependents.json";
      std::string dependents_json_filename =
         build_implicit_json_dependents_filename_for_project(component.get_project_root());
      Hexagon::ComponentRelationsNavigator::DocumentationDependentsJSONLoader dependents_relations_loader(
         dependents_json_filename
      );
      return dependents_relations_loader.build_dependent_names_for_component_name(component.get_name());
    body_dependency_symbols:
      - Hexagon::ComponentRelationsNavigator::DocumentationDependentsJSONLoader


  - name: build_relatives_list
    type: std::vector<std::string>
    body: |
      Blast::Project::ComponentRelativeLister relative_lister(&component);
      std::vector<std::string> result_component_names = relative_lister.list_component_relative_names();
      return result_component_names;
    body_dependency_symbols:
      - Blast::Project::ComponentRelativeLister


  - name: build_dependencies_list
    type: std::vector<std::string>
    body: |
      // TODO: test this functionality
      Blast::Project::ComponentDependencyLister dependency_lister(&component);
      std::vector<std::string> result_component_names = dependency_lister.list_component_dependency_names();
      return result_component_names;
    body_dependency_symbols:
      - Blast::Project::ComponentDependencyLister


  - name: build_implicit_json_dependents_filename_for_project
    type: std::string
    static: true
    private: true
    parameters:
      - name: project_root
        type: std::string
        default_argument: '"[unset-project_root]"'
    guards: [ valid_project_root(&project_root) ]
    body: |
      return project_root + "/documentation/dependents.json";


  - name: valid_project_root
    type: bool
    static: true
    private: true
    parameters:
      - name: project_root
        type: std::string*
        default_argument: nullptr
    guards: [ project_root ]
    body: |
       std::string expected_prefix = "/Users/markoates/Repos/";
       bool has_valid_prefixed_path = (project_root->compare(0, expected_prefix.length(), expected_prefix) == 0);
       if (!has_valid_prefixed_path) return false;
       
       if (project_root->empty()) return false;
       for (char c : *project_root)
       {
          if (!std::isalnum(c) && c != '_' && c != '-' && c != '/')
          {
             return false;
          }
       }
       return true;


dependencies:


  - symbol: Blast::Project::ComponentDependencyLister
    headers: [ Blast/Project/ComponentDependencyLister.hpp ]
  - symbol: Blast::Project::ComponentRelativeLister
    headers: [ Blast/Project/ComponentRelativeLister.hpp ]
  - symbol: Blast::Project::Component
    headers: [ Blast/Project/Component.hpp ]
  - symbol: std::vector<Blast::Project::Component>
    headers: [ vector, Blast/Project/Component.hpp ]
  - symbol: Hexagon::ComponentRelationsNavigator::DocumentationDependentsJSONLoader
    headers: [ Hexagon/ComponentRelationsNavigator/DocumentationDependentsJSONLoader.hpp ]


